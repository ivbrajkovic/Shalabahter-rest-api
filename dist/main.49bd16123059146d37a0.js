!function(e){function t(t){for(var o,c,s=t[0],i=t[1],l=t[2],u=0,d=[];u<s.length;u++)c=s[u],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&d.push(n[c][0]),n[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);for(p&&p(t);d.length;)d.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,s=1;s<r.length;s++){var i=r[s];0!==n[i]&&(o=!1)}o&&(a.splice(t--,1),e=c(c.s=r[0]))}return e}var o={},n={1:0},a=[];function c(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=o,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(r,o,function(t){return e[t]}.bind(null,o));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var s=window.webpackJsonp=window.webpackJsonp||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var p=i;a.push([74,0]),r()}({2:function(e){e.exports=JSON.parse('{"appName":"shalabahter","appToken":"token","urls":{"login":"http://127.0.0.1:3000/api/auth/login","data":"http://127.0.0.1:3000/api/posts","me":"http://127.0.0.1:3000/api/auth/me","insert":"http://127.0.0.1:3000/api/posts","update":"http://127.0.0.1:3000/api/posts","delete":"http://127.0.0.1:3000/api/posts"}}')},22:function(e,t,r){e.exports={"form-control":"form-control__3UCJd",formControl:"form-control__3UCJd","form-control-label":"form-control-label__K1E0K",formControlLabel:"form-control-label__K1E0K","form-control-line":"form-control-line__1dh59",formControlLine:"form-control-line__1dh59"}},48:function(e,t,r){},6:function(e,t,r){e.exports={root:"root__1XFx6","span-default":"span-default__1S2nX",spanDefault:"span-default__1S2nX","input-default":"input-default__3pNMB",inputDefault:"input-default__3pNMB",input:"input__U4Zrt",bottom:"bottom__2gDuF",top:"top__2_0Zu",left:"left__3xy88",right:"right__1hmLk",icon:"icon__3jjIn"}},74:function(e,t,r){"use strict";r.r(t);r(47),r(48);var o=r(0),n=r(1),a=r(5),c=r(2);const s=sessionStorage,i=e=>({type:"SET_LOADING",payload:e}),l=e=>({type:"SET_ADMIN",payload:e}),p=e=>{let t;return e?"string"==typeof e?t=e:"string"==typeof e.message?t=e.message:e.message="Unknown error":t="",t},u=e=>({type:"SET_ERROR",payload:p(e)});var d=e=>{let{children:t,onDone:r,timeout:a=3e3}=e;const[c,s]=Object(n.f)(!1);return Object(n.b)(()=>{s(!0),setTimeout(()=>{s(!1),r&&setTimeout(()=>r(),1e3)},a)},[]),Object(o.h)("div",{className:"fixed z-50 left-0 bottom-0 ml-8 mb-8 py-4 px-8 text-gray-100 bg-teal-500 transition duration-1000 transform ".concat(c?"opacity-100 translate-y-0":"opacity-0 -translate-y-full")},t)},b=r(31),h=r.n(b);var f=e=>{Object(n.b)(()=>{e?h.a.start():h.a.done()},[e])},O=r(32);const g={bgDecoration:{position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%",overflow:"hidden",zIndex:1},bgDecorationSvg:{position:"absolute",top:0,minWidth:1280,maxWidth:1920,height:"auto",opacity:".4"}};var m=()=>Object(o.h)("figure",{style:g.bgDecoration,"aria-hidden":"true"},Object(o.h)("svg",{style:g.bgDecorationSvg,viewBox:"0 0 1920 450",fill:"none"},Object(o.h)("rect",{opacity:"0.5",x:"610.131",y:"-440",width:"128",height:"836.003",transform:"rotate(46.8712 610.131 -440)",fill:"url(#bg-decoration-v1-fx-5-linear-1)"}),Object(o.h)("rect",{opacity:"0.5",x:"1899.13",y:"-262",width:"128",height:"836.003",transform:"rotate(46.8712 1899.13 -262)",fill:"url(#bg-decoration-v1-fx-5-linear-2)"}),Object(o.h)("rect",{opacity:"0.5",x:"2076.13",y:"-321",width:"128",height:"836.003",transform:"rotate(46.8712 2076.13 -321)",fill:"url(#bg-decoration-v1-fx-5-linear-3)"}),Object(o.h)("rect",{opacity:"0.5",x:"1294.5",y:"40.3308",width:"128",height:"836.003",transform:"rotate(-132.518 1294.5 40.3308)",fill:"url(#bg-decoration-v1-fx-5-linear-4)"}),Object(o.h)("rect",{opacity:"0.5",x:"1866.13",y:"-453",width:"128",height:"836.003",transform:"rotate(46.8712 1866.13 -453)",fill:"url(#bg-decoration-v1-fx-5-linear-5)"}),Object(o.h)("rect",{opacity:"0.5",x:"800.131",y:"-418",width:"128",height:"836.003",transform:"rotate(46.8712 800.131 -418)",fill:"url(#bg-decoration-v1-fx-5-linear-5)"}),Object(o.h)("rect",{opacity:"0.5",x:"436.448",y:"-251",width:"76.1734",height:"340.424",transform:"rotate(46.8712 436.448 -251)",fill:"url(#bg-decoration-v1-fx-5-linear-7)"}),Object(o.h)("defs",null,Object(o.h)("linearGradient",{id:"bg-decoration-v1-fx-5-linear-1",x1:"674.131",y1:"-440",x2:"674.131",y2:"396.003",gradientUnits:"userSpaceOnUse"},Object(o.h)("stop",{"stop-color":"currentColor"}),Object(o.h)("stop",{offset:"1","stop-color":"currentColor","stop-opacity":"0"})),Object(o.h)("linearGradient",{id:"bg-decoration-v1-fx-5-linear-2",x1:"1963.13",y1:"-262",x2:"1963.13",y2:"574.003",gradientUnits:"userSpaceOnUse"},Object(o.h)("stop",{"stop-color":"currentColor"}),Object(o.h)("stop",{offset:"1","stop-color":"currentColor","stop-opacity":"0"})),Object(o.h)("linearGradient",{id:"bg-decoration-v1-fx-5-linear-3",x1:"2140.13",y1:"-321",x2:"2140.13",y2:"515.003",gradientUnits:"userSpaceOnUse"},Object(o.h)("stop",{"stop-color":"currentColor"}),Object(o.h)("stop",{offset:"1","stop-color":"currentColor","stop-opacity":"0"})),Object(o.h)("linearGradient",{id:"bg-decoration-v1-fx-5-linear-4",x1:"1358.5",y1:"40.3308",x2:"1358.5",y2:"876.334",gradientUnits:"userSpaceOnUse"},Object(o.h)("stop",{"stop-color":"currentColor"}),Object(o.h)("stop",{offset:"1","stop-color":"currentColor","stop-opacity":"0"})),Object(o.h)("linearGradient",{id:"bg-decoration-v1-fx-5-linear-5",x1:"1930.13",y1:"-453",x2:"1930.13",y2:"383.003",gradientUnits:"userSpaceOnUse"},Object(o.h)("stop",{"stop-color":"currentColor"}),Object(o.h)("stop",{offset:"1","stop-color":"currentColor","stop-opacity":"0"})),Object(o.h)("linearGradient",{id:"bg-decoration-v1-fx-5-linear-5",x1:"864.131",y1:"-418",x2:"864.131",y2:"418.003",gradientUnits:"userSpaceOnUse"},Object(o.h)("stop",{"stop-color":"currentColor"}),Object(o.h)("stop",{offset:"1","stop-color":"currentColor","stop-opacity":"0"})),Object(o.h)("linearGradient",{id:"bg-decoration-v1-fx-5-linear-7",x1:"474.534",y1:"-251",x2:"474.534",y2:"89.4236",gradientUnits:"userSpaceOnUse"},Object(o.h)("stop",{"stop-color":"currentColor","stop-opacity":"0"}),Object(o.h)("stop",{offset:"1","stop-color":"currentColor"})))));const j="py-5 px-6 hover:bg-teal-500 duration-200 cursor-pointer outline-none";var y=e=>{let{loggedIn:t,admin:r}=e;const i=Object(n.a)(F);return Object(o.h)("div",{className:"fixed top-0 z-50 w-full text-lg tracking-wider bg-gray-600 shadow-xl"},Object(o.h)(m,null),Object(o.h)("div",{className:"container flex justify-between"},Object(o.h)("div",{className:"flex items-center"},Object(o.h)("a",{href:"/",className:"text-2xl"},"Shalabahter")),Object(o.h)("nav",{className:"flex"},Object(o.h)(O.Link,{href:"/",className:j,activeClassName:"".concat(r?"":"bg-teal-500"),onClick:()=>i(l(!1))},"Home"),t&&Object(o.h)("div",{className:"".concat(j).concat(r?" bg-teal-500":""),onClick:()=>i(l(!0))},"Admin"),t&&Object(o.h)("div",{className:j,onClick:()=>{i((s.removeItem(c.appToken),{type:"SET_LOGOUT"})),Object(a.route)("/login")}},"Logout")||Object(o.h)(O.Link,{href:"/login",className:j,activeClassName:"bg-teal-500"},"Login"))))},v=(r(49),r(6)),x=r.n(v);var w=e=>{const{iconClasses:t,borderClasses:r}=e;return t&&delete e.iconClasses,r&&delete e.borderClasses,e.class&&(e.class+=" "+x.a.input),e.className?e.className+=" "+x.a.input:e.className=x.a["input-default"]+" "+x.a.input,Object(o.h)("div",{className:x.a.root},Object(o.h)("svg",{className:t||x.a.icon,viewBox:"0 0 24 24"},Object(o.h)("g",{"stroke-linecap":"square","stroke-linejoin":"miter","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-miterlimit":"10"},Object(o.h)("line",{x1:"22",y1:"22",x2:"15.656",y2:"15.656"}),Object(o.h)("circle",{cx:"10",cy:"10",r:"8"}))),Object(o.h)("input",e),["bottom","right","top","left"].map(e=>Object(o.h)("span",{className:"".concat(x.a[e]," ").concat(r||x.a["span-default"])})))};r(40),r(46);function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}const _=e=>{e.style.height="",e.style.height=Math.min(e.scrollHeight)+2+"px"};var S=e=>{const t=Object(n.e)();return Object(n.b)(()=>{_(t.current)},[]),Object(o.h)("textarea",N({ref:t,rows:"1",cols:"50"},e,{onInput:t=>{const r=t.target;_(r),e.onInput&&e.onInput(t)}}))};function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const P="px-4 py-3 text-gray-100 duration-200 cursor-pointer",D={id:"",pitanje:"",odgovori:[]};var E=e=>{let{data:t,admin:r,insertOdgovor:a,updateOdgovor:c,deleteOdgovor:s}=e;const i=Object(n.e)(!0),[l,p]=Object(n.f)(t||D);Object(n.b)(()=>{i.current?i.current=!1:p(t)},[t]);const u=e=>{const t=e.target.value,r=e.target.getAttribute("data-key");p(e=>{const o=C({},e);return o.odgovori[r]=t,o})},d=e=>{const t=e.target.getAttribute("data-key");p(e=>{const r=C({},e);return r.odgovori.splice(t,1),r})},b=r?"border":"resize-none";return Object(o.h)("div",{className:"flex flex-col p-4 bg-white shadow-md sm:shadow-lg"},Object(o.h)("div",{className:"flex pb-1 mb-3 border-b"},Object(o.h)("div",{className:"inline-block text-lg"},"".concat(l.id,"."))," ",Object(o.h)(S,{rows:"1",readonly:!r,className:"flex-1 inline-block h-8 text-lg ".concat(b),value:l.pitanje,onInput:e=>{const t=e.target.value;p(e=>{const r=C({},e);return r.pitanje=t,r})}},l.pitanje)),Object(o.h)("div",{className:"flex-1 ".concat(r?"border-b mb-4":"")},l.odgovori.map((e,t)=>Object(o.h)("div",{key:t,className:"flex"},r&&Object(o.h)("div",{"data-key":t,className:"inline-block w-8 h-8 p-1 mr-2 text-center rounded-full cursor-pointer lin hover:bg-gray-200",onClick:d},"−"),Object(o.h)(S,{"data-key":t,readonly:!r,className:"min-h-full flex-1 mb-2 leading-tight ".concat(b),value:e,onInput:u}))),r&&Object(o.h)("div",{className:"inline-block w-8 h-8 p-1 text-center rounded-full cursor-pointer lin hover:bg-gray-200",onClick:e=>{const t=e.target.value;p(e=>{const r=C({},e);return r.odgovori.push(t),r})}},"+")),r&&(a&&Object(o.h)("div",{className:"ml-auto "},Object(o.h)("button",{className:"".concat(P," bg-red-500 hover:bg-teal-600"),onClick:()=>{a(l),p(C({},D))}},"Add"))||Object(o.h)("div",{className:"ml-auto "},Object(o.h)("button",{className:"".concat(P," bg-red-500 hover:bg-red-600"),onClick:()=>s(l.id)},"Delete"),Object(o.h)("button",{className:"".concat(P," ml-4 bg-teal-500 hover:bg-teal-600"),onClick:()=>c(l)},"Update"))))};var I=(e,t)=>{var r;e((r=t,s.removeItem(c.appToken),{type:"SET_UNAUTHORIZED",payload:p(r)})),Object(a.route)("/login")};const U=async e=>{let{url:t,method:r,headers:o,postData:n,dispatch:a,cb:c}=e;a(i(!0));const s=o&&!!o.authorization;try{const e=await fetch(t,{method:r,headers:o,body:n?JSON.stringify(n):void 0}),l=await e.json();if(a(i(!1)),s&&401===e.status)return I(a,l.error);if(l&&!l.success)return a(u(l.error));l&&l.success&&c(l.data)}catch(e){throw e}},L=e=>{let{url:t,method:r="GET",postData:o,dispatch:n,cb:a}=e;const s=sessionStorage.getItem(c.appToken);if(!s)return I(n,"No token found");const i={authorization:"Bearer "+s};"POST"!==r&&"PUT"!==r||(i["Content-Type"]="application/json"),U({url:t,method:r,headers:i,postData:o,dispatch:n,cb:a})};var G=e=>{let{admin:t}=e;const r=Object(n.e)(!0),a=Object(n.a)(F),[s,i]=Object(n.f)([]),[l,p]=Object(n.f)(""),d=Object(n.c)(()=>((e,t)=>{if(!t)return e;if(!e.length>0)return e;const r=new RegExp(t,"i");return e.filter(e=>{const{pitanje:t,odgovori:o}=e;if(r.test(t))return!0;for(let e=0;e<o.length;e++)if(r.test(o[e]))return!0;return!1})})(s,l),[s,l]);Object(n.b)(()=>{(r.current||!t)&&((e,t,r)=>{U({url:e,dispatch:t,cb:r})})(c.urls.data,a,e=>{e&&Array.isArray(e)&&e.length>0&&i(e)}),r.current&&(r.current=!1)},[t]);const b=e=>{((e,t,r,o)=>{L({url:e,method:"PUT",postData:t,dispatch:r,cb:o})})(c.urls.update,e,a,e=>{e&&e.id?a(u("Post with id ".concat(e.id," updated uccessfully"))):a(u("Error updating post"))})},h=e=>{((e,t,r)=>{L({url:e,method:"DELETE",dispatch:t,cb:r})})("".concat(c.urls.update,"/").concat(e),a,t=>{t&&t.id?(a(u("Post with id ".concat(t.id," deleted uccessfully"))),i(t=>{let r=[...t];const o=r.findIndex(t=>t.id===e);return o>-1?(r.splice(o,1),r):t})):a(u("Error deleting post"))})};return Object(o.h)("div",{className:"mb-8 text-blue-700"},Object(o.h)("div",{className:"max-w-sm p-4 mx-auto mb-4 bg-white shadow-md sm:mb-8 sm:shadow-lg"},Object(o.h)(w,{value:l,onInput:e=>{const t=e.target.value;p(t)},className:"w-full px-4 py-2",placeholder:"Search for ...",borderClasses:"bg-blue-700",iconClasses:"mx-2 h-6 w-6"})),Object(o.h)("div",{className:"grid gap-4 sm:gap-8 grid-cols-posts"},d.map((e,r)=>Object(o.h)(E,{key:r,data:e,admin:t,updateOdgovor:b,deleteOdgovor:h})),t&&Object(o.h)(E,{admin:t,insertOdgovor:e=>{((e,t,r,o)=>{L({url:e,method:"POST",postData:t,dispatch:r,cb:o})})("".concat(c.urls.insert),e,a,t=>{t&&t.id?(a(u("Post with id ".concat(t.id," created uccessfully"))),i(r=>{const o=[...r];return o.push({id:t.id,pitanje:e.pitanje,odgovori:[...e.odgovori]}),o})):a(u("Error creating post"))})}})))},A=r(22),M=r.n(A);var R=e=>{let{name:t,type:r="text",autofocus:n=!1}=e;return Object(o.h)("div",{className:"relative my-6"},Object(o.h)("input",{type:r,className:"text-blue-700 border-b border-gray-400 ".concat(M.a["form-control"]),name:t,autocomplete:"off",required:!0,autofocus:n}),Object(o.h)("label",{for:"name",className:"text-gray-500 ".concat(M.a["form-control-label"])},t),Object(o.h)("span",{className:"bg-blue-700 ".concat(M.a["form-control-line"])}))};var z=()=>{const e=Object(n.e)(),t=Object(n.a)(F);return Object(o.h)("div",{className:"container flex items-center justify-center h-full"},Object(o.h)("form",{ref:e,className:"w-full overflow-hidden text-gray-400 bg-white shadow-xl sm:w-8/12 lg:w-1/3",onSubmit:async e=>{e.preventDefault(),t(i(!0));const r=e.currentTarget,o={user:r.elements.name.value,password:r.elements.password.value};((e,t,r,o)=>{U({url:e,method:"POST",headers:{"Content-Type":"application/json"},postData:t,dispatch:r,cb:o})})(c.urls.login,o,t,e=>{const r=e&&e.token;t((e=>(e&&s.setItem(c.appToken,e),{type:"SET_LOGIN"}))(r)),Object(a.route)("/")}),(e=>{e.elements.name.value="",e.elements.password.value="",e.elements.name.focus()})(r)}},Object(o.h)("div",{className:"py-4 text-2xl text-center text-gray-100 bg-teal-500"},Object(o.h)("h2",null,"Login")),Object(o.h)("div",{className:"px-10"},Object(o.h)(R,{name:"name",autofocus:!0}),Object(o.h)(R,{name:"password",type:"password"}),Object(o.h)("div",{className:"mt-8 mb-10"},Object(o.h)("input",{className:"px-4 py-3 text-gray-100 duration-200 bg-teal-500 cursor-pointer hover:bg-teal-600",type:"submit",value:"Submit"})))))};function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const K={loading:!1,loggedIn:!1,admin:!1,error:""},Z=(e,t)=>{switch(console.log("reducer -> action",t),t.type){case"SET_LOGOUT":return B({},K);case"SET_LOGIN":return B({},K,{loggedIn:!0,admin:!0});case"SET_ADMIN":return B({},e,{admin:t.payload});case"SET_LOADING":return B({},e,{loading:t.payload});case"SET_ERROR":return B({},e,{loading:!1,error:t.payload});case"SET_UNAUTHORIZED":return B({},K,{error:t.payload});default:return e}},F=Object(o.createContext)();var X=()=>{const[e,t]=Object(n.d)(Z,K);return f(e.loading),Object(n.b)(()=>()=>{sessionStorage.removeItem(settings.appToken)},[]),Object(o.h)(o.Fragment,null,Object(o.h)(F.Provider,{value:t},Object(o.h)(y,{loggedIn:e.loggedIn,admin:e.admin}),e.error&&Object(o.h)(d,{onDone:()=>t(u())},e.error),Object(o.h)("main",{className:"container h-screen pt-20 sm:pt-24"},Object(o.h)(a.default,null,Object(o.h)(G,{path:"/",admin:e.admin}),Object(o.h)(z,{path:"/login"})))))};Object(o.render)(Object(o.h)(X,null),document.body)}});